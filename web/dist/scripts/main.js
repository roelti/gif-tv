function launchFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function assign_bootstrap_mode(){width=$(window).innerWidth();var e="";width<768?e="mode-xs":width<992?e="mode-sm":width<1200?e="mode-md":width>1200&&(e="mode-lg"),"mode-xs"==e&&window.location.replace("/m")}function mousemover(e){barSuppressed||($("body").addClass("show-tag"),null!==runningTimeout&&(clearTimeout(runningTimeout),runningTimeout=null),forceBar||(runningTimeout=setTimeout(function(){$("body").removeClass("show-tag"),runningTimeout=null},5e3)))}function supressBar(e){$("body").removeClass("show-tag"),barSuppressed=!0,runningTimeout=setTimeout(function(){barSuppressed=!1},1e3)}function cycle(){render(term)}function render(e){if(console.log("render",e,gifs.length),gifs.length>0){var n=gifs.shift();console.log("render:media",n);var o=n.gif.url;"10"==$(".image_1").css("z-index")?($(".image_1").css("z-index","-1"),$(".image_2").css("z-index","10"),background_image_1=o,$(".image_1").attr("src",o),$("body").css("background-image","url("+background_image_2+")")):($(".image_2").css("z-index","-1"),$(".image_1").css("z-index","10"),background_image_2=o,$(".image_2").attr("src",o),$("body").css("background-image","url("+background_image_1+")"))}if(0==gifs.length&&!alreadyGetting){alreadyGetting=!0;var t="https://api.tenor.co/v1/search?key=LIVDSRZULELA&pos="+nextPos;e&&(t+="&tag="+encodeURIComponent(e)),console.log("render:get gifs",t),$.getJSON(t,function(n){alreadyGetting=!1,console.log("render:got gifs",n);for(index in n.results){var o=n.results[index];gifs.push(o.media[0])}nextPos=n.next,render(e),prevTerm!=e&&(prevTerm=e,render(e))})}}function customTag(e){supressBar(),term=e,""===term?(document.title="Random GIFs",$(".keywordmode").removeClass("active"),$(".change-button").removeClass("active"),$(".randommode").addClass("active"),$(".input_controls").addClass("hidden"),$("body").find(".popup").addClass("hidden")):(document.title=" Now playing: "+term+" GIFs",$(".randommode").removeClass("active"),$(".change-button").addClass("active"),$(".keywordmode").addClass("active"),$("body").find(".popup").addClass("hidden")),gifs=[],nextPos="",clearInterval(cycleInterval),cycleInterval=setInterval(cycle,1e4),render(term)}var fullscreen=!1,runningTimeout=null,forceBar=!1,barSuppressed=!1,background_image_1="",background_image_2="",title="",term="",counter=0,pos="",gifs=[],nextPos="",alreadyGetting=!1,prevTerm=null,cycleInterval=setInterval(cycle,1e4);$(document).ready(function(){render(term),assign_bootstrap_mode(),$(".fullscreen-button").click(function(e){fullscreen===!1?(launchFullscreen(document.documentElement),$(".fa-expand").removeClass("fa-expand").addClass("fa-compress"),fullscreen=!0):(exitFullscreen(document.documentElement),fullscreen=!1,$(".fa-compress").removeClass("fa-compress").addClass("fa-expand"))}),$("body").mousemove(mousemover),$("#tag-input").keypress(mousemover),$(".mo-closebtn").on("click",function(){$("body").find(".popup").addClass("hidden")}),$(".infopopup-button").on("click",function(){$("body").find(".popup").removeClass("hidden")}),$(".keywordmode").click(function(e){$(".input_controls").removeClass("hidden"),$(".randommode").removeClass("active"),$(".keywordmode").addClass("active"),$("body").find(".popup").addClass("hidden")}),$(".change-button").click(function(e){customTag($("input").val())}),$("input").on("keydown",function(e){13==e.keyCode&&customTag($("input").val())}),$(".randommode").click(function(e){$("input").val(""),customTag("")}),$(".gif").click(cycle),$("#tag-input").on("focus",function(){forceBar=!0}),$("#tag-input").on("blur",function(){forceBar=!1,mousemover()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibGF1bmNoRnVsbHNjcmVlbiIsImVsZW1lbnQiLCJyZXF1ZXN0RnVsbHNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4iLCJtc1JlcXVlc3RGdWxsc2NyZWVuIiwiZXhpdEZ1bGxzY3JlZW4iLCJkb2N1bWVudCIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJ3ZWJraXRFeGl0RnVsbHNjcmVlbiIsImFzc2lnbl9ib290c3RyYXBfbW9kZSIsIndpZHRoIiwiJCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJtb2RlIiwibG9jYXRpb24iLCJyZXBsYWNlIiwibW91c2Vtb3ZlciIsImUiLCJiYXJTdXBwcmVzc2VkIiwiYWRkQ2xhc3MiLCJydW5uaW5nVGltZW91dCIsImNsZWFyVGltZW91dCIsImZvcmNlQmFyIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwic3VwcmVzc0JhciIsImN5Y2xlIiwicmVuZGVyIiwidGVybSIsImNvbnNvbGUiLCJsb2ciLCJnaWZzIiwibGVuZ3RoIiwibWVkaWEiLCJzaGlmdCIsImltZ1VybCIsImdpZiIsInVybCIsImNzcyIsImJhY2tncm91bmRfaW1hZ2VfMSIsImF0dHIiLCJiYWNrZ3JvdW5kX2ltYWdlXzIiLCJhbHJlYWR5R2V0dGluZyIsIm5leHRQb3MiLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZXRKU09OIiwiZGF0YSIsImluZGV4IiwicmVzdWx0cyIsInJlc3VsdCIsInB1c2giLCJuZXh0IiwicHJldlRlcm0iLCJjdXN0b21UYWciLCJrZXl3b3JkIiwidGl0bGUiLCJmaW5kIiwiY2xlYXJJbnRlcnZhbCIsImN5Y2xlSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImZ1bGxzY3JlZW4iLCJjb3VudGVyIiwicG9zIiwicmVhZHkiLCJjbGljayIsImRvY3VtZW50RWxlbWVudCIsIm1vdXNlbW92ZSIsImtleXByZXNzIiwib24iLCJ2YWwiLCJrZXlD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LEVBQUFxRCxTQUNBakIsVUFBQTNDLEVBQUEsU0FBQTJELFNBS0EzRCxFQUFBLGVBQUFzRCxNQUFBLFNBQUEvQyxHQUNBUCxFQUFBLFNBQUEyRCxJQUFBLElBQ0FoQixVQUFBLE1BR0EzQyxFQUFBLFFBQUFzRCxNQUFBdEMsT0FFQWhCLEVBQUEsY0FBQTBELEdBQUEsUUFBQSxXQUNBOUMsVUFBQSxJQUdBWixFQUFBLGNBQUEwRCxHQUFBLE9BQUEsV0FDQTlDLFVBQUEsRUFDQU4iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBmdWxsc2NyZWVuID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGxhdW5jaEZ1bGxzY3JlZW4oZWxlbWVudCkge1xuICBpZihlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuICB9IGVsc2UgaWYoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xuICAgIGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcbiAgfSBlbHNlIGlmKGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gIH0gZWxzZSBpZihlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBleGl0RnVsbHNjcmVlbigpIHtcbiAgaWYoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcbiAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuICB9IGVsc2UgaWYoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikge1xuICAgIGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcbiAgfSBlbHNlIGlmKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7XG4gICAgZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NpZ25fYm9vdHN0cmFwX21vZGUoKSB7XG4gICAgd2lkdGggPSAkKCB3aW5kb3cgKS5pbm5lcldpZHRoKCk7XG4gICAgdmFyIG1vZGUgPSAnJztcbiAgICBpZiAod2lkdGg8NzY4KSB7XG4gICAgICAgIG1vZGUgPSBcIm1vZGUteHNcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAod2lkdGg8OTkyKSB7XG4gICAgICAgIG1vZGUgPSBcIm1vZGUtc21cIjtcbiAgICB9XG4gICAgZWxzZSBpZiAod2lkdGg8MTIwMCkge1xuICAgICAgICBtb2RlID0gXCJtb2RlLW1kXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpZHRoPjEyMDApIHtcbiAgICAgICAgbW9kZSA9IFwibW9kZS1sZ1wiO1xuICAgIH1cbiAgICBpZiAobW9kZSA9PSAnbW9kZS14cycpe1xuICAgIFx0d2luZG93LmxvY2F0aW9uLnJlcGxhY2UoXCIvbVwiKTsgXG4gICAgfVxufVxuXG4vLyBTaG93IGJhciB3aGVuIG1vdXNlIG1vdmVzXG5mdW5jdGlvbiBtb3VzZW1vdmVyKGUpe1xuXHRpZihiYXJTdXBwcmVzc2VkKXtcblx0XHRyZXR1cm47XG5cdH1cblx0JCgnYm9keScpLmFkZENsYXNzKCdzaG93LXRhZycpO1xuXHRpZihydW5uaW5nVGltZW91dCE9PW51bGwpe1xuXHRcdGNsZWFyVGltZW91dChydW5uaW5nVGltZW91dCk7XG5cdFx0cnVubmluZ1RpbWVvdXQ9bnVsbDtcblx0fVxuXHRpZiAoIWZvcmNlQmFyKSB7XG5cdFx0cnVubmluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IFxuXHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdzaG93LXRhZycpO1xuXHRcdFx0cnVubmluZ1RpbWVvdXQgPSBudWxsO1xuXHRcdH0sIDUwMDApO1xuXHR9XG59XG52YXIgcnVubmluZ1RpbWVvdXQgPSBudWxsO1xuXG52YXIgZm9yY2VCYXIgPSBmYWxzZTtcbnZhciBiYXJTdXBwcmVzc2VkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHN1cHJlc3NCYXIoZSl7XG5cdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc2hvdy10YWcnKTtcblx0YmFyU3VwcHJlc3NlZCA9IHRydWU7XG5cdHJ1bm5pbmdUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdGJhclN1cHByZXNzZWQgPSBmYWxzZTtcblx0fSwgMTAwMCk7XG59XG5cbnZhciBiYWNrZ3JvdW5kX2ltYWdlXzEgPSBcIlwiO1x0XG52YXIgYmFja2dyb3VuZF9pbWFnZV8yID0gXCJcIjtcbnZhciB0aXRsZSA9ICcnO1xudmFyIHRlcm0gPSAnJztcblxuLy8gU2V0IGN5Y2xlIHRvIHN3aXRjaCBpbWFnZXNcbmZ1bmN0aW9uIGN5Y2xlKCl7IFxuXHRyZW5kZXIodGVybSk7XG59XG5cbnZhciBjb3VudGVyID0gMDtcbnZhciBwb3MgPSAnJztcblxuXG52YXIgZ2lmcyA9IFtdO1xudmFyIG5leHRQb3MgPSAnJztcblxudmFyIGFscmVhZHlHZXR0aW5nID0gZmFsc2U7XG5cbnZhciBwcmV2VGVybSA9IG51bGw7XG5cbi8vVE9ETzogSWYgY291bnRlciA9IDAgZGFuIGdldEpTT04gZW4gY291bnRlciByZXNldHRlbiBiaWogdGVybSB6b2VrZW5cbmZ1bmN0aW9uIHJlbmRlcih0ZXJtKXtcblxuXHRjb25zb2xlLmxvZygncmVuZGVyJywgdGVybSwgZ2lmcy5sZW5ndGgpO1xuXG5cblx0aWYoZ2lmcy5sZW5ndGggPiAwKXtcblxuXHRcdHZhciBtZWRpYSA9IGdpZnMuc2hpZnQoKTtcblx0XHRjb25zb2xlLmxvZygncmVuZGVyOm1lZGlhJywgbWVkaWEpO1xuXHRcdHZhciBpbWdVcmwgPSBtZWRpYS5naWYudXJsO1xuXG5cdFx0Ly8gY29uc29sZS5sb2coZGF0YSwgY291bnRlcik7XG5cdFx0Ly9pbWdVcmwgPSBpbWdVcmwucmVwbGFjZSgnaHR0cDovLycsICdodHRwczovLycpO1xuXHRcdGlmKCQoJy5pbWFnZV8xJykuY3NzKFwiei1pbmRleFwiKSA9PSBcIjEwXCIpIHtcblx0XHRcdCQoJy5pbWFnZV8xJykuY3NzKFwiei1pbmRleFwiLCBcIi0xXCIpOyBcblx0XHRcdCQoJy5pbWFnZV8yJykuY3NzKFwiei1pbmRleFwiLCBcIjEwXCIpO1xuXHRcdFx0YmFja2dyb3VuZF9pbWFnZV8xID0gaW1nVXJsO1xuXHRcdFx0JCgnLmltYWdlXzEnKS5hdHRyKFwic3JjXCIsaW1nVXJsKTtcblx0XHRcdCQoJ2JvZHknKS5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsXCJ1cmwoXCIgKyBiYWNrZ3JvdW5kX2ltYWdlXzIgKyBcIilcIik7XG5cblx0XHR9IGVsc2Uge1x0XG5cdFx0XHQkKCcuaW1hZ2VfMicpLmNzcyhcInotaW5kZXhcIiwgXCItMVwiKTsgXG5cdFx0XHQkKCcuaW1hZ2VfMScpLmNzcyhcInotaW5kZXhcIiwgXCIxMFwiKTtcblx0XHRcdFx0YmFja2dyb3VuZF9pbWFnZV8yID0gaW1nVXJsO1xuXHRcdFx0JCgnLmltYWdlXzInKS5hdHRyKFwic3JjXCIsaW1nVXJsKTtcblx0ICAgIFx0JCgnYm9keScpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcInVybChcIiArIGJhY2tncm91bmRfaW1hZ2VfMSArIFwiKVwiKTsgXG5cdFx0fVxuXHR9XG5cblx0aWYoZ2lmcy5sZW5ndGggPT0gMCl7XG5cdFx0aWYoIWFscmVhZHlHZXR0aW5nKXtcblxuXG5cdFx0XHRhbHJlYWR5R2V0dGluZyA9IHRydWU7XG5cblxuXHRcdFx0dmFyIHVybCA9ICdodHRwczovL2FwaS50ZW5vci5jby92MS9zZWFyY2g/a2V5PUxJVkRTUlpVTEVMQScgKyAnJnBvcz0nICsgbmV4dFBvcztcblx0XHRcdFxuXHRcdFx0aWYodGVybSl7XG5cdFx0XHRcdHVybCArPSAnJnRhZz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRlcm0pO1xuXHRcdFx0fVxuXG5cblx0XHRcdGNvbnNvbGUubG9nKCdyZW5kZXI6Z2V0IGdpZnMnLCB1cmwpO1xuXHRcdFx0JC5nZXRKU09OKHVybCwgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdGFscmVhZHlHZXR0aW5nID0gZmFsc2U7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZW5kZXI6Z290IGdpZnMnLCBkYXRhKTtcblx0XHRcdFx0Zm9yKGluZGV4IGluIGRhdGEucmVzdWx0cyl7XG5cdFx0XHRcdFx0dmFyIHJlc3VsdCA9IGRhdGEucmVzdWx0c1tpbmRleF07XG5cdFx0XHRcdFx0Z2lmcy5wdXNoKHJlc3VsdC5tZWRpYVswXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV4dFBvcyA9IGRhdGEubmV4dDtcblx0XHRcdFx0cmVuZGVyKHRlcm0pO1xuXG5cdFx0XHRcdGlmKHByZXZUZXJtICE9IHRlcm0pe1xuXHRcdFx0XHRcdHByZXZUZXJtID0gdGVybTtcblx0XHRcdFx0XHRyZW5kZXIodGVybSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblx0fVxuXG59XG5cbi8vRnVuY3Rpb24gdG8gYXBwbHkgY3VzdG9tIHRhZ1xuZnVuY3Rpb24gY3VzdG9tVGFnKGtleXdvcmQpe1xuXHRzdXByZXNzQmFyKCk7XG5cdHRlcm0gPSBrZXl3b3JkO1xuXHRpZiAodGVybSA9PT0gJycpe1xuXHRcdGRvY3VtZW50LnRpdGxlID0gJ1JhbmRvbSBHSUZzJztcblx0XHQkKFwiLmtleXdvcmRtb2RlXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHQkKFwiLmNoYW5nZS1idXR0b25cIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdCQoXCIucmFuZG9tbW9kZVwiKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0JChcIi5pbnB1dF9jb250cm9sc1wiKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdFx0JCgnYm9keScpLmZpbmQoJy5wb3B1cCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0fVxuXHRlbHNlIHtcblx0XHRkb2N1bWVudC50aXRsZSA9ICcgTm93IHBsYXlpbmc6ICcgKyB0ZXJtICsgJyBHSUZzJztcblx0XHQkKFwiLnJhbmRvbW1vZGVcIikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdCQoXCIuY2hhbmdlLWJ1dHRvblwiKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0JChcIi5rZXl3b3JkbW9kZVwiKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0JCgnYm9keScpLmZpbmQoJy5wb3B1cCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0fVxuXHRcblx0Z2lmcyA9IFtdO1xuXHRuZXh0UG9zID0gJyc7XG5cblx0Y2xlYXJJbnRlcnZhbChjeWNsZUludGVydmFsKTtcblx0Y3ljbGVJbnRlcnZhbCA9IHNldEludGVydmFsKGN5Y2xlLCAxMDAwMCk7XG5cblx0cmVuZGVyKHRlcm0pO1xufVxuXG4vLyBTZXQgaW50ZXJ2YWwgdG8gMTBzXG52YXIgY3ljbGVJbnRlcnZhbCA9IHNldEludGVydmFsKGN5Y2xlLCAxMDAwMCk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XG5cblx0cmVuZGVyKHRlcm0pO1xuXG5cdGFzc2lnbl9ib290c3RyYXBfbW9kZSgpO1xuXG5cdC8vIFNldCBmdWxsc2NyZWVuIGJ1dHRvblxuXHQkKFwiLmZ1bGxzY3JlZW4tYnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uKGVsZW1lbnQpe1xuXHRcdGlmIChmdWxsc2NyZWVuID09PSBmYWxzZSl7XG5cdFx0XHRsYXVuY2hGdWxsc2NyZWVuKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG5cdFx0XHQkKCcuZmEtZXhwYW5kJykucmVtb3ZlQ2xhc3MoJ2ZhLWV4cGFuZCcpLmFkZENsYXNzKCdmYS1jb21wcmVzcycpO1xuXHRcdFx0ZnVsbHNjcmVlbiA9IHRydWU7XG5cdFx0fVxuXHRcdGVsc2V7XG5cdFx0XHRleGl0RnVsbHNjcmVlbihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuXHRcdFx0ZnVsbHNjcmVlbiA9IGZhbHNlO1xuXHRcdFx0JCgnLmZhLWNvbXByZXNzJykucmVtb3ZlQ2xhc3MoJ2ZhLWNvbXByZXNzJykuYWRkQ2xhc3MoJ2ZhLWV4cGFuZCcpO1xuXHRcdH1cblx0fSk7XG5cblx0JCggXCJib2R5XCIgKS5tb3VzZW1vdmUobW91c2Vtb3Zlcik7XG5cdCQoJyN0YWctaW5wdXQnKS5rZXlwcmVzcyhtb3VzZW1vdmVyKTtcblxuXHQkKCcubW8tY2xvc2VidG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICAgXHRcdCQoJ2JvZHknKS5maW5kKCcucG9wdXAnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICBcdH0pO1xuXG5cdCQoJy5pbmZvcG9wdXAtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgIFx0XHQkKCdib2R5JykuZmluZCgnLnBvcHVwJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgXHR9KTtcblxuXHQvL0J1dHRvbiB0byBhcHBseSBjdXN0b20gdGFnXG5cdCQoXCIua2V5d29yZG1vZGVcIikuY2xpY2soZnVuY3Rpb24oZSl7XG5cdFx0JChcIi5pbnB1dF9jb250cm9sc1wiKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG5cdFx0JChcIi5yYW5kb21tb2RlXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHQkKFwiLmtleXdvcmRtb2RlXCIpLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHQkKCdib2R5JykuZmluZCgnLnBvcHVwJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHR9KTtcblxuXHQkKFwiLmNoYW5nZS1idXR0b25cIikuY2xpY2soZnVuY3Rpb24oZSl7XG5cdFx0Y3VzdG9tVGFnKCQoXCJpbnB1dFwiKS52YWwoKSk7XHRcblx0fSk7XG5cblx0Ly9FbnRlciBidXR0b24gdG8gYXBwbHkgY3VzdG9tIHRhZ1xuXHQkKCdpbnB1dCcpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZSl7XG5cdFx0aWYgKGUua2V5Q29kZSA9PSAxMyl7XG5cdFx0XHRjdXN0b21UYWcoJChcImlucHV0XCIpLnZhbCgpKTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIEJhY2sgdG8gcmFuZG9tIEdJRidzXG5cdCQoXCIucmFuZG9tbW9kZVwiKS5jbGljayhmdW5jdGlvbihlKXtcblx0XHQkKFwiaW5wdXRcIikudmFsKCcnKTtcblx0XHRjdXN0b21UYWcoJycpO1xuXHR9KTtcblx0XG5cdCQoJy5naWYnKS5jbGljayhjeWNsZSk7XG5cblx0JCgnI3RhZy1pbnB1dCcpLm9uKCdmb2N1cycsIGZ1bmN0aW9uKCl7XG5cdFx0Zm9yY2VCYXIgPSB0cnVlO1xuXHR9KTtcblxuXHQkKCcjdGFnLWlucHV0Jykub24oJ2JsdXInLCBmdW5jdGlvbigpe1xuXHRcdGZvcmNlQmFyID0gZmFsc2U7XG5cdFx0bW91c2Vtb3ZlcigpO1xuXHR9KTtcblxufSk7XG5cblxuXG5cbiJdfQ==
