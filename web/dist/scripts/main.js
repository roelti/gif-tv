function launchFullscreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function assign_bootstrap_mode(){width=$(window).innerWidth();var e="";width<768?e="mode-xs":width<992?e="mode-sm":width<1200?e="mode-md":width>1200&&(e="mode-lg"),"mode-xs"==e&&window.location.replace("/m")}function mousemover(e){barSuppressed||($("body").addClass("show-tag"),null!==runningTimeout&&(clearTimeout(runningTimeout),runningTimeout=null),forceBar||(runningTimeout=setTimeout(function(){$("body").removeClass("show-tag"),runningTimeout=null},5e3)))}function supressBar(e){$("body").removeClass("show-tag"),barSuppressed=!0,runningTimeout=setTimeout(function(){barSuppressed=!1},1e3)}function cycle(){render(term)}function render(e){if(gifs.length>0){var n=gifs.shift(),o=n.gif.url;"10"==$(".image_1").css("z-index")?($(".image_1").css("z-index","-1"),$(".image_2").css("z-index","10"),background_image_1=o,$(".image_1").attr("src",o),$("body").css("background-image","url("+background_image_2+")")):($(".image_2").css("z-index","-1"),$(".image_1").css("z-index","10"),background_image_2=o,$(".image_2").attr("src",o),$("body").css("background-image","url("+background_image_1+")"))}if(0==gifs.length&&!alreadyGetting){alreadyGetting=!0;var t="trending";e&&(t="search");var s="https://api.tenor.co/v1/"+t+"?key=LIVDSRZULELA&pos="+nextPos;e&&(s+="&tag="+encodeURIComponent(e)),$.getJSON(s,function(n){alreadyGetting=!1;for(index in n.results){var o=n.results[index];gifs.push(o.media[0])}nextPos=n.next,n.results.length>0&&(render(e),prevTerm!=e&&(prevTerm=e,render(e)))})}}function customTag(e){supressBar(),term=e,""===term?(document.title="Random GIFs",$(".keywordmode").removeClass("active"),$(".change-button").removeClass("active"),$(".randommode").addClass("active"),$(".input_controls").addClass("hidden"),$("body").find(".popup").addClass("hidden")):(document.title=" Now playing: "+term+" GIFs",$(".randommode").removeClass("active"),$(".change-button").addClass("active"),$(".keywordmode").addClass("active"),$("body").find(".popup").addClass("hidden")),gifs=[],nextPos="",clearInterval(cycleInterval),cycleInterval=setInterval(cycle,1e4),render(term)}var fullscreen=!1,runningTimeout=null,forceBar=!1,barSuppressed=!1,background_image_1="",background_image_2="",title="",term="",counter=0,pos="",gifs=[],nextPos="",alreadyGetting=!1,prevTerm=null,cycleInterval=setInterval(cycle,1e4);$(document).ready(function(){render(term),assign_bootstrap_mode(),$(".fullscreen-button").click(function(e){fullscreen===!1?(launchFullscreen(document.documentElement),$(".fa-expand").removeClass("fa-expand").addClass("fa-compress"),fullscreen=!0):(exitFullscreen(document.documentElement),fullscreen=!1,$(".fa-compress").removeClass("fa-compress").addClass("fa-expand"))}),$("body").mousemove(mousemover),$("#tag-input").keypress(mousemover),$(".mo-closebtn").on("click",function(){$("body").find(".popup").addClass("hidden")}),$(".infopopup-button").on("click",function(){$("body").find(".popup").removeClass("hidden")}),$(".keywordmode").click(function(e){$(".input_controls").removeClass("hidden"),$(".randommode").removeClass("active"),$(".keywordmode").addClass("active"),$("body").find(".popup").addClass("hidden")}),$(".change-button").click(function(e){customTag($("input").val())}),$("input").on("keydown",function(e){13==e.keyCode&&customTag($("input").val())}),$(".randommode").click(function(e){$("input").val(""),customTag("")}),$(".gif").click(cycle),$("#tag-input").on("focus",function(){forceBar=!0}),$("#tag-input").on("blur",function(){forceBar=!1,mousemover()})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibGF1bmNoRnVsbHNjcmVlbiIsImVsZW1lbnQiLCJyZXF1ZXN0RnVsbHNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4iLCJtc1JlcXVlc3RGdWxsc2NyZWVuIiwiZXhpdEZ1bGxzY3JlZW4iLCJkb2N1bWVudCIsIm1vekNhbmNlbEZ1bGxTY3JlZW4iLCJ3ZWJraXRFeGl0RnVsbHNjcmVlbiIsImFzc2lnbl9ib290c3RyYXBfbW9kZSIsIndpZHRoIiwiJCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJtb2RlIiwibG9jYXRpb24iLCJyZXBsYWNlIiwibW91c2Vtb3ZlciIsImUiLCJiYXJTdXBwcmVzc2VkIiwiYWRkQ2xhc3MiLCJydW5uaW5nVGltZW91dCIsImNsZWFyVGltZW91dCIsImZvcmNlQmFyIiwic2V0VGltZW91dCIsInJlbW92ZUNsYXNzIiwic3VwcmVzc0JhciIsImN5Y2xlIiwicmVuZGVyIiwidGVybSIsImdpZnMiLCJsZW5ndGgiLCJtZWRpYSIsInNoaWZ0IiwiaW1nVXJsIiwiZ2lmIiwidXJsIiwiY3NzIiwiYmFja2dyb3VuZF9pbWFnZV8xIiwiYXR0ciIsImJhY2tncm91bmRfaW1hZ2VfMiIsImFscmVhZHlHZXR0aW5nIiwibmV4dFBvcyIsImVuY29kZVVSSUNvbXBvbmVudCIsImdldEpTT04iLCJkYXRhIiwiaW5kZXgiLCJyZXN1bHRzIiwicmVzdWx0IiwicHVzaCIsIm5leHQiLCJwcmV2VGVybSIsImN1c3RvbVRhZyIsImtleXdvcmQiLCJ0aXRsZSIsImZpbmQiLCJjbGVhckludGVydmFsIiwiY3ljbGVJbnRlcnZhbCIsInNldEludGVydmFsIiwiZnVsbHNjcmVlbiIsImNvdW50ZXIiLCJwb3MiLCJyZWFkeSIsImNsaWNrIiwiZG9jdW1lbnRFbGVtZW50IiwibW91c2Vtb3ZlIiwia2V5cHJlc3MiLCJvbiIsInZhbCIsImtleUNvZGUiXSwibWFwcGluZ3Mi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LFNBQUE3QyxHQUNBUCxFQUFBLFNBQUF5RCxJQUFBLElBQ0FoQixVQUFBLE1BR0F6QyxFQUFBLFFBQUFvRCxNQUFBcEMsT0FFQWhCLEVBQUEsY0FBQXdELEdBQUEsUUFBQSxXQUNBNUMsVUFBQSxJQUdBWixFQUFBLGNBQUF3RCxHQUFBLE9BQUEsV0FDQTVDLFVBQUEsRUFDQU4iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBmdWxsc2NyZWVuID0gZmFsc2U7XG5cbmZ1bmN0aW9uIGxhdW5jaEZ1bGxzY3JlZW4oZWxlbWVudCkge1xuICBpZihlbGVtZW50LnJlcXVlc3RGdWxsc2NyZWVuKSB7XG4gICAgZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuICB9IGVsc2UgaWYoZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbikge1xuICAgIGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcbiAgfSBlbHNlIGlmKGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICBlbGVtZW50LndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gIH0gZWxzZSBpZihlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHtcbiAgICBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBleGl0RnVsbHNjcmVlbigpIHtcbiAgaWYoZG9jdW1lbnQuZXhpdEZ1bGxzY3JlZW4pIHtcbiAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuICB9IGVsc2UgaWYoZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbikge1xuICAgIGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4oKTtcbiAgfSBlbHNlIGlmKGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKSB7XG4gICAgZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4oKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NpZ25fYm9vdHN0cmFwX21vZGUoKSB7XG4gICAgd2lkdGggPSAkKCB3aW5kb3cgKS5pbm5lcldpZHRoKCk7XG4gICAgdmFyIG1vZGUgPSAnJztcbiAgICBpZiAod2lkdGg8NzY4KSB7XG4gICAgICAgIG1vZGUgPSBcIm1vZGUteHNcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAod2lkdGg8OTkyKSB7XG4gICAgICAgIG1vZGUgPSBcIm1vZGUtc21cIjtcbiAgICB9XG4gICAgZWxzZSBpZiAod2lkdGg8MTIwMCkge1xuICAgICAgICBtb2RlID0gXCJtb2RlLW1kXCI7XG4gICAgfVxuICAgIGVsc2UgaWYgKHdpZHRoPjEyMDApIHtcbiAgICAgICAgbW9kZSA9IFwibW9kZS1sZ1wiO1xuICAgIH1cbiAgICBpZiAobW9kZSA9PSAnbW9kZS14cycpe1xuICAgIFx0d2luZG93LmxvY2F0aW9uLnJlcGxhY2UoXCIvbVwiKTsgXG4gICAgfVxufVxuXG4vLyBTaG93IGJhciB3aGVuIG1vdXNlIG1vdmVzXG5mdW5jdGlvbiBtb3VzZW1vdmVyKGUpe1xuXHRpZihiYXJTdXBwcmVzc2VkKXtcblx0XHRyZXR1cm47XG5cdH1cblx0JCgnYm9keScpLmFkZENsYXNzKCdzaG93LXRhZycpO1xuXHRpZihydW5uaW5nVGltZW91dCE9PW51bGwpe1xuXHRcdGNsZWFyVGltZW91dChydW5uaW5nVGltZW91dCk7XG5cdFx0cnVubmluZ1RpbWVvdXQ9bnVsbDtcblx0fVxuXHRpZiAoIWZvcmNlQmFyKSB7XG5cdFx0cnVubmluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IFxuXHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKCdzaG93LXRhZycpO1xuXHRcdFx0cnVubmluZ1RpbWVvdXQgPSBudWxsO1xuXHRcdH0sIDUwMDApO1xuXHR9XG59XG52YXIgcnVubmluZ1RpbWVvdXQgPSBudWxsO1xuXG52YXIgZm9yY2VCYXIgPSBmYWxzZTtcbnZhciBiYXJTdXBwcmVzc2VkID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHN1cHJlc3NCYXIoZSl7XG5cdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc2hvdy10YWcnKTtcblx0YmFyU3VwcHJlc3NlZCA9IHRydWU7XG5cdHJ1bm5pbmdUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdGJhclN1cHByZXNzZWQgPSBmYWxzZTtcblx0fSwgMTAwMCk7XG59XG5cbnZhciBiYWNrZ3JvdW5kX2ltYWdlXzEgPSBcIlwiO1x0XG52YXIgYmFja2dyb3VuZF9pbWFnZV8yID0gXCJcIjtcbnZhciB0aXRsZSA9ICcnO1xudmFyIHRlcm0gPSAnJztcblxuLy8gU2V0IGN5Y2xlIHRvIHN3aXRjaCBpbWFnZXNcbmZ1bmN0aW9uIGN5Y2xlKCl7IFxuXHRyZW5kZXIodGVybSk7XG59XG5cbnZhciBjb3VudGVyID0gMDtcbnZhciBwb3MgPSAnJztcblxuXG52YXIgZ2lmcyA9IFtdO1xudmFyIG5leHRQb3MgPSAnJztcblxudmFyIGFscmVhZHlHZXR0aW5nID0gZmFsc2U7XG5cbnZhciBwcmV2VGVybSA9IG51bGw7XG5cbi8vVE9ETzogSWYgY291bnRlciA9IDAgZGFuIGdldEpTT04gZW4gY291bnRlciByZXNldHRlbiBiaWogdGVybSB6b2VrZW5cbmZ1bmN0aW9uIHJlbmRlcih0ZXJtKXtcblxuXHRcblxuXG5cdGlmKGdpZnMubGVuZ3RoID4gMCl7XG5cblx0XHR2YXIgbWVkaWEgPSBnaWZzLnNoaWZ0KCk7XG5cdFx0XG5cdFx0dmFyIGltZ1VybCA9IG1lZGlhLmdpZi51cmw7XG5cblx0XHQvLyBjb25zb2xlLmxvZyhkYXRhLCBjb3VudGVyKTtcblx0XHQvL2ltZ1VybCA9IGltZ1VybC5yZXBsYWNlKCdodHRwOi8vJywgJ2h0dHBzOi8vJyk7XG5cdFx0aWYoJCgnLmltYWdlXzEnKS5jc3MoXCJ6LWluZGV4XCIpID09IFwiMTBcIikge1xuXHRcdFx0JCgnLmltYWdlXzEnKS5jc3MoXCJ6LWluZGV4XCIsIFwiLTFcIik7IFxuXHRcdFx0JCgnLmltYWdlXzInKS5jc3MoXCJ6LWluZGV4XCIsIFwiMTBcIik7XG5cdFx0XHRiYWNrZ3JvdW5kX2ltYWdlXzEgPSBpbWdVcmw7XG5cdFx0XHQkKCcuaW1hZ2VfMScpLmF0dHIoXCJzcmNcIixpbWdVcmwpO1xuXHRcdFx0JCgnYm9keScpLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcInVybChcIiArIGJhY2tncm91bmRfaW1hZ2VfMiArIFwiKVwiKTtcblxuXHRcdH0gZWxzZSB7XHRcblx0XHRcdCQoJy5pbWFnZV8yJykuY3NzKFwiei1pbmRleFwiLCBcIi0xXCIpOyBcblx0XHRcdCQoJy5pbWFnZV8xJykuY3NzKFwiei1pbmRleFwiLCBcIjEwXCIpO1xuXHRcdFx0XHRiYWNrZ3JvdW5kX2ltYWdlXzIgPSBpbWdVcmw7XG5cdFx0XHQkKCcuaW1hZ2VfMicpLmF0dHIoXCJzcmNcIixpbWdVcmwpO1xuXHQgICAgXHQkKCdib2R5JykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKFwiICsgYmFja2dyb3VuZF9pbWFnZV8xICsgXCIpXCIpOyBcblx0XHR9XG5cdH1cblxuXHRpZihnaWZzLmxlbmd0aCA9PSAwKXtcblx0XHRpZighYWxyZWFkeUdldHRpbmcpe1xuXG5cblx0XHRcdGFscmVhZHlHZXR0aW5nID0gdHJ1ZTtcblxuXHRcdFx0dmFyIG1vZGUgPSAndHJlbmRpbmcnO1xuXHRcdFx0aWYodGVybSl7XG5cdFx0XHRcdG1vZGUgPSAnc2VhcmNoJztcblx0XHRcdH1cblxuXHRcdFx0dmFyIHVybCA9ICdodHRwczovL2FwaS50ZW5vci5jby92MS8nICsgbW9kZSArICc/a2V5PUxJVkRTUlpVTEVMQScgKyAnJnBvcz0nICsgbmV4dFBvcztcblx0XHRcdFxuXHRcdFx0aWYodGVybSl7XG5cdFx0XHRcdHVybCArPSAnJnRhZz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRlcm0pO1xuXHRcdFx0fVxuXG5cblx0XHRcdCQuZ2V0SlNPTih1cmwsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHRhbHJlYWR5R2V0dGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcblx0XHRcdFx0Zm9yKGluZGV4IGluIGRhdGEucmVzdWx0cyl7XG5cdFx0XHRcdFx0dmFyIHJlc3VsdCA9IGRhdGEucmVzdWx0c1tpbmRleF07XG5cdFx0XHRcdFx0Z2lmcy5wdXNoKHJlc3VsdC5tZWRpYVswXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV4dFBvcyA9IGRhdGEubmV4dDtcblx0XHRcdFx0XG5cdFx0XHRcdGlmIChkYXRhLnJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHJlbmRlcih0ZXJtKTtcblxuXHRcdFx0XHRcdGlmKHByZXZUZXJtICE9IHRlcm0pe1xuXHRcdFx0XHRcdFx0cHJldlRlcm0gPSB0ZXJtO1xuXHRcdFx0XHRcdFx0cmVuZGVyKHRlcm0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBcblx0XHRcdFx0XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0XG5cdH1cblxufVxuXG4vL0Z1bmN0aW9uIHRvIGFwcGx5IGN1c3RvbSB0YWdcbmZ1bmN0aW9uIGN1c3RvbVRhZyhrZXl3b3JkKXtcblx0c3VwcmVzc0JhcigpO1xuXHR0ZXJtID0ga2V5d29yZDtcblx0aWYgKHRlcm0gPT09ICcnKXtcblx0XHRkb2N1bWVudC50aXRsZSA9ICdSYW5kb20gR0lGcyc7XG5cdFx0JChcIi5rZXl3b3JkbW9kZVwiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0JChcIi5jaGFuZ2UtYnV0dG9uXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHQkKFwiLnJhbmRvbW1vZGVcIikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdCQoXCIuaW5wdXRfY29udHJvbHNcIikuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdCQoJ2JvZHknKS5maW5kKCcucG9wdXAnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0ZG9jdW1lbnQudGl0bGUgPSAnIE5vdyBwbGF5aW5nOiAnICsgdGVybSArICcgR0lGcyc7XG5cdFx0JChcIi5yYW5kb21tb2RlXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHQkKFwiLmNoYW5nZS1idXR0b25cIikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdCQoXCIua2V5d29yZG1vZGVcIikuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdCQoJ2JvZHknKS5maW5kKCcucG9wdXAnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG5cdH1cblx0XG5cdGdpZnMgPSBbXTtcblx0bmV4dFBvcyA9ICcnO1xuXG5cdGNsZWFySW50ZXJ2YWwoY3ljbGVJbnRlcnZhbCk7XG5cdGN5Y2xlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjeWNsZSwgMTAwMDApO1xuXG5cdHJlbmRlcih0ZXJtKTtcbn1cblxuLy8gU2V0IGludGVydmFsIHRvIDEwc1xudmFyIGN5Y2xlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjeWNsZSwgMTAwMDApO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuXG5cdHJlbmRlcih0ZXJtKTtcblxuXHRhc3NpZ25fYm9vdHN0cmFwX21vZGUoKTtcblxuXHQvLyBTZXQgZnVsbHNjcmVlbiBidXR0b25cblx0JChcIi5mdWxsc2NyZWVuLWJ1dHRvblwiKS5jbGljayhmdW5jdGlvbihlbGVtZW50KXtcblx0XHRpZiAoZnVsbHNjcmVlbiA9PT0gZmFsc2Upe1xuXHRcdFx0bGF1bmNoRnVsbHNjcmVlbihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpO1xuXHRcdFx0JCgnLmZhLWV4cGFuZCcpLnJlbW92ZUNsYXNzKCdmYS1leHBhbmQnKS5hZGRDbGFzcygnZmEtY29tcHJlc3MnKTtcblx0XHRcdGZ1bGxzY3JlZW4gPSB0cnVlO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdFx0ZXhpdEZ1bGxzY3JlZW4oZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcblx0XHRcdGZ1bGxzY3JlZW4gPSBmYWxzZTtcblx0XHRcdCQoJy5mYS1jb21wcmVzcycpLnJlbW92ZUNsYXNzKCdmYS1jb21wcmVzcycpLmFkZENsYXNzKCdmYS1leHBhbmQnKTtcblx0XHR9XG5cdH0pO1xuXG5cdCQoIFwiYm9keVwiICkubW91c2Vtb3ZlKG1vdXNlbW92ZXIpO1xuXHQkKCcjdGFnLWlucHV0Jykua2V5cHJlc3MobW91c2Vtb3Zlcik7XG5cblx0JCgnLm1vLWNsb3NlYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKXtcbiAgIFx0XHQkKCdib2R5JykuZmluZCgnLnBvcHVwJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgXHR9KTtcblxuXHQkKCcuaW5mb3BvcHVwLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gICBcdFx0JCgnYm9keScpLmZpbmQoJy5wb3B1cCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgIFx0fSk7XG5cblx0Ly9CdXR0b24gdG8gYXBwbHkgY3VzdG9tIHRhZ1xuXHQkKFwiLmtleXdvcmRtb2RlXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe1xuXHRcdCQoXCIuaW5wdXRfY29udHJvbHNcIikucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuXHRcdCQoXCIucmFuZG9tbW9kZVwiKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0JChcIi5rZXl3b3JkbW9kZVwiKS5hZGRDbGFzcygnYWN0aXZlJyk7XG5cdFx0JCgnYm9keScpLmZpbmQoJy5wb3B1cCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcblx0fSk7XG5cblx0JChcIi5jaGFuZ2UtYnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe1xuXHRcdGN1c3RvbVRhZygkKFwiaW5wdXRcIikudmFsKCkpO1x0XG5cdH0pO1xuXG5cdC8vRW50ZXIgYnV0dG9uIHRvIGFwcGx5IGN1c3RvbSB0YWdcblx0JCgnaW5wdXQnKS5vbigna2V5ZG93bicsIGZ1bmN0aW9uKGUpe1xuXHRcdGlmIChlLmtleUNvZGUgPT0gMTMpe1xuXHRcdFx0Y3VzdG9tVGFnKCQoXCJpbnB1dFwiKS52YWwoKSk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBCYWNrIHRvIHJhbmRvbSBHSUYnc1xuXHQkKFwiLnJhbmRvbW1vZGVcIikuY2xpY2soZnVuY3Rpb24oZSl7XG5cdFx0JChcImlucHV0XCIpLnZhbCgnJyk7XG5cdFx0Y3VzdG9tVGFnKCcnKTtcblx0fSk7XG5cdFxuXHQkKCcuZ2lmJykuY2xpY2soY3ljbGUpO1xuXG5cdCQoJyN0YWctaW5wdXQnKS5vbignZm9jdXMnLCBmdW5jdGlvbigpe1xuXHRcdGZvcmNlQmFyID0gdHJ1ZTtcblx0fSk7XG5cblx0JCgnI3RhZy1pbnB1dCcpLm9uKCdibHVyJywgZnVuY3Rpb24oKXtcblx0XHRmb3JjZUJhciA9IGZhbHNlO1xuXHRcdG1vdXNlbW92ZXIoKTtcblx0fSk7XG5cbn0pO1xuXG5cblxuXG4iXX0=
